<div *ngIf="loading">
  <mat-spinner></mat-spinner>
</div>

<div *ngIf="loaded" class="container set">
  <h1>{{ set.name }}</h1>

  <h3>
    View set on Scryfall
    <a mat-icon-button color="primary" href="{{ set.scryfall_uri }}" target="_blank">
      <mat-icon>open_in_new</mat-icon>
    </a>
  </h3>

  <div class="container img-container">
    <img src="{{ set.icon_svg_uri }}" class="set-icon" alt="set icon">
  </div>

  <div class="container buttons">
    <button mat-raised-button color="accent" (click)="showCards()">Show cards</button>
    <button mat-raised-button color="warn" routerLink="/">Go back</button>
  </div>

  <div class="container" *ngIf="showCardsFlag">
  
    <mat-tab-group>

      <mat-tab label="Mythics">
        <table mat-table *ngIf="loaded" [dataSource]="mythics" class="mat-elevation-z4">
          
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef> Name </th>
            <td mat-cell *matCellDef="let card"> {{ card.name }} </td>
          </ng-container>

          <ng-container matColumnDef="cost">
            <th mat-header-cell *matHeaderCellDef> Mana cost </th>
            <td mat-cell *matCellDef="let card"> {{ card.mana_cost }} </td>
          </ng-container>

          <ng-container matColumnDef="link">
            <th mat-header-cell *matHeaderCellDef> Link </th>
            <td mat-cell *matCellDef="let card">
              <a mat-icon-button color="primary" href="{{ card.scryfall_uri }}" target="_blank">
                <mat-icon>open_in_new</mat-icon>
              </a>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="['name', 'cost', 'link']"></tr>
          <tr mat-row *matRowDef="let row; columns: ['name', 'cost', 'link'];"></tr>

        </table>
      </mat-tab>
  
      <mat-tab label="Rares">
        <table mat-table *ngIf="loaded" [dataSource]="rares" class="mat-elevation-z4">
          
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef> Name </th>
            <td mat-cell *matCellDef="let card"> {{ card.name }} </td>
          </ng-container>

          <ng-container matColumnDef="cost">
            <th mat-header-cell *matHeaderCellDef> Mana cost </th>
            <td mat-cell *matCellDef="let card"> {{ card.mana_cost }} </td>
          </ng-container>

          <ng-container matColumnDef="link">
            <th mat-header-cell *matHeaderCellDef> Link </th>
            <td mat-cell *matCellDef="let card">
              <a mat-icon-button color="primary" href="{{ card.scryfall_uri }}" target="_blank">
                <mat-icon>open_in_new</mat-icon>
              </a>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="['name', 'cost', 'link']"></tr>
          <tr mat-row *matRowDef="let row; columns: ['name', 'cost', 'link'];"></tr>

        </table>
      </mat-tab>

      <mat-tab label="Uncommons">
        <table mat-table *ngIf="loaded" [dataSource]="uncommons" class="mat-elevation-z4">
          
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef> Name </th>
            <td mat-cell *matCellDef="let card"> {{ card.name }} </td>
          </ng-container>

          <ng-container matColumnDef="cost">
            <th mat-header-cell *matHeaderCellDef> Mana cost </th>
            <td mat-cell *matCellDef="let card"> {{ card.mana_cost }} </td>
          </ng-container>

          <ng-container matColumnDef="link">
            <th mat-header-cell *matHeaderCellDef> Link </th>
            <td mat-cell *matCellDef="let card">
              <a mat-icon-button color="primary" href="{{ card.scryfall_uri }}" target="_blank">
                <mat-icon>open_in_new</mat-icon>
              </a>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="['name', 'cost', 'link']"></tr>
          <tr mat-row *matRowDef="let row; columns: ['name', 'cost', 'link'];"></tr>

        </table>
      </mat-tab>

      <mat-tab label="Commons">
        <table mat-table *ngIf="loaded" [dataSource]="commons" class="mat-elevation-z4">
          
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef> Name </th>
            <td mat-cell *matCellDef="let card"> {{ card.name }} </td>
          </ng-container>

          <ng-container matColumnDef="cost">
            <th mat-header-cell *matHeaderCellDef> Mana cost </th>
            <td mat-cell *matCellDef="let card"> {{ card.mana_cost }} </td>
          </ng-container>

          <ng-container matColumnDef="link">
            <th mat-header-cell *matHeaderCellDef> Link </th>
            <td mat-cell *matCellDef="let card">
              <a mat-icon-button color="primary" href="{{ card.scryfall_uri }}" target="_blank">
                <mat-icon>open_in_new</mat-icon>
              </a>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="['name', 'cost', 'link']"></tr>
          <tr mat-row *matRowDef="let row; columns: ['name', 'cost', 'link'];"></tr>

        </table>
      </mat-tab>
    </mat-tab-group>    
    
  </div>

</div>